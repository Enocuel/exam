# üîç –†–µ—à–µ–Ω–∏–µ

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –∑–∞–¥–∞—á–µ?
–ù–∞–º –¥–∞–Ω—ã `n` —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, —Å—Ç–æ—è—â–∏—Ö –≤ —Ä—è–¥, —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º–∏ —Ä–æ—Å—Ç–∞–º–∏. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–≥—Ä—ã —Å–æ—Å–µ–¥–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∑–Ω–∞–∫–æ–º—è—Ç—Å—è –∏ –≤—ã—Ö–æ–¥—è—Ç –∏–∑ —Ä—è–¥–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —á–∞—Å—Ç–∏ —Ä—è–¥–∞ —Å–¥–≤–∏–≥–∞—é—Ç—Å—è, —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø—É—Å—Ç–æ—Ç—É. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –≤ —Ä—è–¥—É –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –º–µ–Ω–µ–µ –¥–≤—É—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤. –¶–µ–ª—å ‚Äî –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—É–º–º—É –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö —Ä–∞–∑–Ω–∏—Ü —Ä–æ—Å—Ç–æ–≤ –≤—Å–µ—Ö –ø–∞—Ä –∑–Ω–∞–∫–æ–º—è—â–∏—Ö—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

### üõ† –ë–∞–∑–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
**1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**
```python
import heapq

def max_total_difference(n, a):
    if n == 2:
        return abs(a[0] - a[1])

    # –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ–º —Ä–∞–∑–Ω–∏—Ü—É, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º max-heap. –í Python heapq —Ç–æ–ª—å–∫–æ min-heap, –ø–æ—ç—Ç–æ–º—É –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è.
    heap = []
    left = [i - 1 for i in range(n)]
    right = [i + 1 for i in range(n)]
    active = [True] * n
```
- –°–æ–∑–¥–∞–µ–º max-–∫—É—á—É, –∏—Å–ø–æ–ª—å–∑—É—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–Ω–∏—Ü (—Ç–∞–∫ –∫–∞–∫ Python heapq —Ä–µ–∞–ª–∏–∑—É–µ—Ç min-–∫—É—á—É).
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤—ã left –∏ right, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Å–µ–¥–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.
- –ú–∞—Å—Å–∏–≤ active –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –µ—â–µ –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.

**2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞—Ä**
```python
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫—É—á–∏: –≤—Å–µ —Å–æ—Å–µ–¥–Ω–∏–µ –ø–∞—Ä—ã
    for i in range(n - 1):
        diff = abs(a[i] - a[i + 1])
        heapq.heappush(heap, (-diff, i, i + 1))  # —Ö—Ä–∞–Ω–∏–º –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –¥–ª—è max-heap
    
    total = 0
    
    while heap:
        neg_diff, u, v = heapq.heappop(heap)
        diff = -neg_diff
        
        if not active[u] or not active[v]:
            continue
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –∫ –æ–±—â–µ–π —Å—É–º–º–µ
        total += diff
        
        # –ü–æ–º–µ—á–∞–µ–º —É–∑–ª—ã –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
        active[u] = False
        active[v] = False
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å–µ–¥–µ–π
        left_u = left[u]
        right_v = right[v]
        
        if left_u != -1:
            right[left_u] = right_v
        if right_v != n:
            left[right_v] = left_u
        
        # –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ —Å–æ—Å–µ–¥–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –≤ –∫—É—á—É
        if left_u != -1 and right_v != n:
            new_diff = abs(a[left_u] - a[right_v])
            heapq.heappush(heap, (-new_diff, left_u, right_v))
    
    return total
```
- –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–∞—Ä—É —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–∑–Ω–∏—Ü–µ–π.
- –ï—Å–ª–∏ –æ–±–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–∞—Ä—ã –∞–∫—Ç–∏–≤–Ω—ã, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö —Ä–∞–∑–Ω–∏—Ü—É –∫ –æ–±—â–µ–π —Å—É–º–º–µ –∏ –ø–æ–º–µ—á–∞–µ–º –∏—Ö –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ.
- –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å–µ–¥–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è: —Ç–µ–ø–µ—Ä—å —Å–æ—Å–µ–¥—è–º–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Å–æ—Å–µ–¥—è–º–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
- –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –ø–∞—Ä—É –≤ –∫—É—á—É, –µ—Å–ª–∏ —Ç–∞–∫–∏–µ —Å–æ—Å–µ–¥–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.

**3. –í—ã–≤–æ–¥–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
```python
n = int(input())
a = list(map(int, input().split()))

print(max_total_difference(n, a))
```
- –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–∞—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—É—é —Å—É–º–º—É —Ä–∞–∑–Ω–∏—Ü.

## üìú –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞

### 1. –¢–µ—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è 

| –í–≤–æ–¥ | –í—ã–≤–æ–¥ |
|------|-------|
|  4   |   4   |
| 1 2 4 3 |       |

| –í–≤–æ–¥ | –í—ã–≤–æ–¥ |
|------|-------|
|  5   |   6   |
| 2 1 4 5 2 |       |

–í—Å–µ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üèÜ –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
```python
import heapq

def max_total_difference(n, a):
    if n == 2:
        return abs(a[0] - a[1])

    # –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ–º —Ä–∞–∑–Ω–∏—Ü—É, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º max-heap. –í Python heapq —Ç–æ–ª—å–∫–æ min-heap, –ø–æ—ç—Ç–æ–º—É –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è.
    heap = []
    left = [i - 1 for i in range(n)]
    right = [i + 1 for i in range(n)]
    active = [True] * n

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫—É—á–∏: –≤—Å–µ —Å–æ—Å–µ–¥–Ω–∏–µ –ø–∞—Ä—ã
    for i in range(n - 1):
        diff = abs(a[i] - a[i + 1])
        heapq.heappush(heap, (-diff, i, i + 1))  # —Ö—Ä–∞–Ω–∏–º –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –¥–ª—è max-heap

    total = 0

    while heap:
        neg_diff, u, v = heapq.heappop(heap)
        diff = -neg_diff

        if not active[u] or not active[v]:
            continue

        # –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–Ω–∏—Ü—É –∫ –æ–±—â–µ–π —Å—É–º–º–µ
        total += diff

        # –ü–æ–º–µ—á–∞–µ–º —É–∑–ª—ã –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
        active[u] = False
        active[v] = False

        # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å–µ–¥–µ–π
        left_u = left[u]
        right_v = right[v]

        if left_u != -1:
            right[left_u] = right_v
        if right_v != n:
            left[right_v] = left_u

        # –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ —Å–æ—Å–µ–¥–∏, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö –≤ –∫—É—á—É
        if left_u != -1 and right_v != n:
            new_diff = abs(a[left_u] - a[right_v])
            heapq.heappush(heap, (-new_diff, left_u, right_v))

    return total


# –ß—Ç–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
n = int(input())
a = list(map(int, input().split()))

print(max_total_difference(n, a))
```

